<html>
  <head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>
  <body class="bg-gray-800 m-8">
    <header class="flex items-center justify-center m-10">
      <div class="relative z-10">
        <h1 class="text-4xl font-bold text-white">Timebox Planner PDFs</h1>
      </div>
    </header>
    <div class="flex items-center justify-center mb-4">
      <div class="inline-flex" id="buttonGroup">
        <button
          class="text-white bg-gray-600 hover:bg-gray-500 px-4 py-2 border border-gray-600 rounded-l focus:outline-none"
          onclick="selectButton(this)"
        >
          day
        </button>
        <button
          class="text-white bg-gray-700 hover:bg-gray-600 px-4 py-2 border border-gray-700 focus:outline-none"
          onclick="selectButton(this)"
        >
          week
        </button>
        <button
          class="text-white bg-gray-700 hover:bg-gray-600 px-4 py-2 border border-gray-700 rounded-r focus:outline-none"
          onclick="selectButton(this)"
        >
          month
        </button>
        <!--
      <button class="text-white bg-gray-700 hover:bg-gray-600 px-4 py-2 border border-gray-700 focus:outline-none" onclick="selectButton(this)">quarter</button>
      <button class="text-white bg-gray-700 hover:bg-gray-600 px-4 py-2 border border-gray-700 rounded-r focus:outline-none" onclick="selectButton(this)">year</button>
      --></div>
    </div>

    <!--
  <div class="flex items-center mb-4">
    <span class="text-white mr-4">Texts:</span>
    <input type="checkbox" id="textsCheckbox" checked class="w-5 h-5 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500">
  </div>
  
  <div class="flex items-center mb-4">
    <span class="text-white mr-4">Spacings:</span>
    <input type="number" id="spacing" class="w-20 p-2 text-white bg-gray-700 rounded focus:outline-none" placeholder="10" step="0.1" value="10">
    <span class="text-white ml-2 mr-8">mm</span>
    <span class="text-white mr-4">in between:</span>
    <input type="number" id="inBetween" class="w-20 p-2 text-white bg-gray-700 rounded focus:outline-none" placeholder="9.5" step="0.1" value="9.5">
    <span class="text-white ml-2">mm</span>
  </div>

  <div class="flex items-center">
    <span class="text-white mr-4">Cell size:</span>
    <input type="number" id="cellSize" class="w-20 p-2 text-white bg-gray-700 rounded focus:outline-none" placeholder="9.5" step="0.1" value="9.5">
    <span class="text-white ml-2">mm</span>
  </div>
-->

    <div id="pdfViewer" class="mt-8"></div>

    <script type="module">
      import { getDailyDoc } from "./daily.mjs";
      import { getWeeklyDoc } from "./weekly.mjs";
      import { getMonthlyDoc } from "./monthly.mjs";

      function selectButton(selectedButton) {
        console.log("selectedButton:", selectedButton);
        // Remove the bg-gray-600 class and adjust border color for all buttons
        let buttons = document.getElementById("buttonGroup").children;
        for (let button of buttons) {
          button.classList.remove("bg-gray-600");
          button.classList.add("bg-gray-700");
          button.style.borderColor = "#4B5563"; // Border color of unselected buttons
        }

        // Add the bg-gray-600 class to the clicked button and adjust border color
        selectedButton.classList.remove("bg-gray-700");
        selectedButton.classList.add("bg-gray-600");
        selectedButton.style.borderColor = "#1F2937"; // Border color of the selected button

        const selectedTimeRange = selectedButton.textContent;

        renderPDFDoc(selectedTimeRange);
      }

      window.selectButton = selectButton;

      function renderPDFDoc(timeRange) {
        let doc = null;
        switch (timeRange) {
          case "day":
            doc = getDailyDoc();
            break;
          case "week":
            doc = getWeeklyDoc();
            break;
          case "month":
            doc = getMonthlyDoc();
            break;
          default:
            break;
        }

        // Output as Data URL
        const pdfDataUri = doc.output("datauristring");

        // Embed the PDF using PDFObject
        PDFObject.embed(pdfDataUri, "#pdfViewer");
      }

      // Set the default selected button (day) on page load
      window.onload = () => {
        const defaultButton =
          document.getElementById("buttonGroup").children[0];
        selectButton(defaultButton);
      };
    </script>
  </body>
</html>
